<script>
  'use strict'

  class MiddleWare extends HTMLElement {
    constructor() {
      super();
    }

    transform_request(target, req) {
      return req;
    }

    transform_response(res) {
      return res
    }

    set_next(mw){
      this.next = mw;
    }

    fetch(target, req){
      return this.next.fetch(target,this.transform_request(req)).then(this.transform_response);
    }
  }

</script>
